<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, intial-scale=1, shrink-to-fit=no">
    <title>Helfy - Einstellungen</title>

    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/main.css" />
</head>

<body onload="menu(); username(); footer();">

        <div id="mySidenav" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <div id="me"><a href="home.html">Home</a></div>
                <a href="#" id="here" style="color: white;">Einstellungen</a>
                <a href="notification.html">Nachrichten <span class="badge badge-pill badge-primary" id="notifyBadge"></span></a>
                <a href="gruppen.html">Gruppen</a>
                <a href="rides.html">Eigene Fahrten</a>
                <br />
              </div>

              <div>
                    <div style="float: left; height:50px; width: 50px;" id="menu">
                    <img src="img/Menu.png" height="50px" style="margin-left: 5px; margin-top: 10%;" onclick="openNav()"></img>
                    </div>
            </div>

    <script type="text/javascript">
    function username() {
    var username = getCookie("username");
    document.getElementById("username").innerHTML = "<h3 style='color: blue; text-align: center;' id='h3username'>@" + username + "</h3>";    
    }

    function toLeftUsername(){
        document.getElementById("changeusername").style.display = "";
        document.getElementById("changepsswd").style.display = "none";
        document.getElementById("changeemail").style.display = "none";
    }

    function toRightUsername(){
        document.getElementById("changeusername").style.display = "none";
        document.getElementById("changepsswd").style.display = "none";
        document.getElementById("changeemail").style.display = "none";

    }

    function toLeftPsswd(){
        document.getElementById("changepsswd").style.display = "";
        document.getElementById("changeusername").style.display = "none";
        document.getElementById("changeemail").style.display = "none";
    }

    function toRightPsswd(){
        document.getElementById("changeusername").style.display = "none";
        document.getElementById("changepsswd").style.display = "none";
        document.getElementById("changeemail").style.display = "none";
    }

    function toLeftEmail(){
        document.getElementById("changeemail").style.display = "";
        document.getElementById("changeusername").style.display = "none";
        document.getElementById("changepsswd").style.display = "none";
    }

    function toRightEmail(){
        document.getElementById("changeusername").style.display = "none";
        document.getElementById("changepsswd").style.display = "none";
        document.getElementById("changeemail").style.display = "none";
    }

    function vorschlag(){
        usernameVorschlag();
    }
    </script>

    <div class="container-float">
        <h1 class="header">Helfy</h1>

        <br />
        
        <div id="formular1" class="formular">
            <div id="username"></div>
            <br />
            <button type="button" class="btn btn-dark" style="margin: 10px;" onclick="toLeftUsername()">Benutzername &auml;ndern</button>
            <button type="button" class="btn btn-dark" style="margin: 10px;" onclick="toLeftPsswd()">Passwort &auml;ndern</button>
            <button type="button" class="btn btn-dark" style="margin: 10px;" onclick="toLeftEmail()">Email-Adresse &auml;ndern</button>
            <form id="autoform"></form>
        </div>

        <div style="display: none; margin-bottom: 5%;" class="formular" id="changeusername">
            <a onclick="toRightUsername()"><p style="float: right; margin-top: 0; font-size: 25px; cursor: pointer;">&times;</p></a>
            <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                <h5 style="text-align: center;"><b>Benutzername &auml;ndern</b></h5><br>
                <input name="username" type="text" class="form-control" id="usernameInp" placeholder="Neuer Benutzername" value="">
            </div>
            <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                <button class="btn-success btn" onclick="changeUsername();">Speichern</button>
                <button class="btn-outline-info btn" onclick="vorschlag()">Vorschlag</button>
            </div>
        </div>

        <div style="display: none; margin-bottom: 5%;" class="formular" id="changepsswd">
                <a onclick="toRightPsswd()"><p style="float: right; margin-top: 0; font-size: 25px; cursor: pointer;">&times;</p></a>
                <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                    <h5 style="text-align: center;"><b>Passwort &auml;ndern</b></h5><br>
                    <input name="oldpsswd" type="password" class="form-control" id="oldpsswd" placeholder="Altes Passwort" value=""><div style="padding: 4px;"></div>
                    <input name="changepsswd1" type="password" class="form-control" id="changepsswd1" placeholder="Neues Passwort" value=""><div style="padding: 4px;"></div>
                    <input name="changepsswd2" type="password" class="form-control" id="changepsswd2" placeholder="Passwort wiederholen" value="">
                </div>
                <p id="pwdFeedback" style="color: green; text-align: center; padding-top: 10px; display: none;"></p>
                <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                    <button class="btn-success btn" onclick="changePassword();" style="display: block; margin: 0 auto;">Speichern</button>
                </div>
            </div>

            <div style="display: none; margin-bottom: 5%;" class="formular" id="changeemail">
                    <a onclick="toRightEmail()"><p style="float: right; margin-top: 0; font-size: 25px; cursor: pointer;">&times;</p></a>
                    <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                        <h5 style="text-align: center;"><b>Email-Adresse &auml;ndern</b></h5><br>
                        <input name="changeemail" type="text" class="form-control" id="changeemailInp" placeholder="Neue Email-Adresse" value="">
                    </div>
                    <br><p style="color: red; padding: 0px 10px;">Nachdem Sie ihre E-Mail Adresse geändert haben, werden Sie automatisch abgemeldet. Wir werden Ihnen dann einen Link senden, mit welchem Sie ihre E-Mail Adresse bestätigen müssen, bevor Sie ihren Account wieder nutzen können.</p>
                    <div class="form-group" style="max-width: 250px; margin: auto; padding-top: 20px;">
                        <button class="btn-success btn" onclick="changeEmail();" style="display: block; margin: 0 auto;">Speichern</button>
                    </div>
                </div>

        </div>
    </div>

    <div id="footer">
        <hr style="margin: 10px; border-radius: 20px; color: darkgray; border-color: darkgrey;">
        <p style="margin-top: 15px; margin-bottom: 7px;">
        <a href="login.html" id="loginLink">Login</a> | <a href="#" onclick="logout()">Logout</a> | <a href="about.html">Über uns</a> | <a href="impressum.html">Impressum</a>
        </p>
        <div style="color: grey; font-size: 10px; margin-bottom: 1%;">Copyright 2018 - <div id="thisyear" style="display: inline-block;"></div> Achim Stumpp, Jakob Stolze</div>
    </div>

    <script src="js/session.js"></script>
    <script src="js/navigation.js"></script>
    <script>
    if(getCookie("username") == ""){
        settingsInvalidSession();
    }
    </script>
</body>

</html>